<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>
    
    <label for="bookdate">累進稅率：</label>
    <input type="" id="bookdate">
    <button type="" id="" onclick="att();">計算稅額</button>


    <script>
        var taxRateLookup = [{

                min: 0,
                max: 540000,
                rate: 0.05
            },
            {
                min: 540001,
                max: 1210000,
                rate: 0.12
            },
            {
                min: 1210001,
                max: 2420000,
                rate: 0.20
            },
            {
                min: 2420001,
                max: 4530000,
                rate: 0.30
            },
            {
                min: 4530001,
                max: 10310000,
                rate: 0.40
            },
            {
                min: 10310001,
                max: 1800000,
                rate: 0.50

            },
            
        ];

        function att() {
            var mon = document.getElementById("bookdate").value;
            var shouldpay = 0;
          

            $([taxRateLookup.length]).each(function(i,item){
                var lll = taxRateLookup[i];

                if (lll.max == 999999999999999999) {
                    if (mon > lll.min) {
                        shouldpay += (mon-lll.min) * lll.rate;
                    }

                } else if ( mon <= lll.min) {
                    
                } else if ( mon > lll.min&& mon<=lll.max) {
                    shouldpay+=(mon-lll.min)*lll.rate;
                   
                }else 
                {
                    shouldpay+=(lll.max-lll.min)*lll.rate;
                }
            })
            

                shouldpay=Math.ceil(shouldpay);
                alert(shouldpay);

        }
    </script>
</body>

</html>